(()=>{function e(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=r(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==t.return||t.return()}finally{if(l)throw o}}}}function n(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,i,a,o,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===n){if(Object(r)!==r)return;l=!1}else for(;!(l=(t=a.call(r)).done)&&(c.push(t.value),c.length!==n);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,n)||r(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,n){if(e){if("string"==typeof e)return t(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}function t(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=Array(n);r<n;r++)t[r]=e[r];return t}console.log("content.js scraper is live");var i=new MutationObserver((function(){}));chrome.runtime.onMessage.addListener((function(r,t,i){if("scanJobPosting"===r.action){var a=function(){var e=document.querySelector(".modal__content.height--100.overflow--hidden");if(!e)return console.warn("Selector not found"),{};var n=e.querySelectorAll(".tag__key-value-list.js--question--container"),r={};return n.forEach((function(e){var n=e.querySelector("span.label");if(n){var t,i=n.innerText.trim().replace(/:$/,""),a=Array.from(e.querySelectorAll("p, li")).map((function(e){return e.innerText.trim()})).filter(Boolean);if(a.length)t=a.join("\n\n");else{var o=e.innerText.split("\n").map((function(e){return e.trim()})).filter(Boolean);o[0]===i+":"&&o.shift(),t=o.join("\n\n")}r[i]=t}})),r}(),o=function(r){for(var t=r["Job Title"]||"",i=r.Organization||"",a=r.Location||"",o=r.Category||r["Job Category"]||r.Skills||"",c=r["Job Description"]||"",l=t.toLowerCase(),u=c.toLowerCase(),s=new Set,f=0,g=Object.entries({software:["Software Engineer","Technical Recruiter","Engineering Manager","Hiring Manager","Talent Acquisition"],finance:["Finance Analyst","Portfolio Manager","Investment Analyst","Finance Recruiter","Hiring Manager","Talent Acquisition"],investment:["Investment Analyst","Wealth Manager","Financial Advisor","Recruiter","Hiring Manager","Talent Acquisition"],product:["Product Manager","Product Owner","Technical Recruiter","Hiring Manager","Talent Acquisition"],data:["Data Scientist","ML Engineer","Analytics Manager","Data Recruiter","Hiring Manager","Talent Acquisition"],design:["UX Designer","Product Designer","Design Manager","Recruiter","Hiring Manager","Talent Acquisition"],legal:["Legal Counsel","Compliance Officer","Legal Recruiter","Hiring Manager","Talent Acquisition"],marketing:["Marketing Manager","Digital Strategist","Marketing Recruiter","Hiring Manager","Talent Acquisition"],sales:["Sales Manager","Account Executive","Sales Recruiter","Hiring Manager","Talent Acquisition"],accounting:["Accountant","Controller","Accounting Recruiter","Hiring Manager","Talent Acquisition"]});f<g.length;f++){var d=n(g[f],2),m=d[0],y=d[1];(l.includes(m)||u.includes(m))&&y.forEach((function(e){return s.add(e)}))}s.add("Recruiter"),s.add("Hiring Manager"),s.add("Talent Acquisition");for(var v=new Set,p=0,h=Object.entries({entry:["entry-level","junior","intern","co-op"],senior:["senior","sr.","lead"],manager:["manager","lead"],director:["director"],vp:["vp","vice president"],head:["head of"],founder:["founder"],c_suite:["ceo","cto","cfo","coo","cmo","cio","chief"],partner:["partner"]});p<h.length;p++){var A,b=n(h[p],2),M=b[0],S=e(b[1]);try{for(S.s();!(A=S.n()).done;){var T=A.value;(l.includes(T)||u.includes(T))&&v.add(M)}}catch(e){S.e(e)}finally{S.f()}}0===v.size&&(v.add("entry"),v.add("senior"));var q={title:Array.from(s),organization_name:i.trim(),organization_locations:a.split(",").map((function(e){return e.trim()})).filter(Boolean),q_organization_keyword_tags:o.split(",").map((function(e){return e.trim()})).filter(Boolean),person_seniorities:Array.from(v)};return console.log("✅ extractQueryParams →",q),q}(a);chrome.runtime.sendMessage({action:"findRelevantConnections",query:o},(function(e){e&&e.error?chrome.runtime.sendMessage({action:"apolloError",error:e.error}):e?chrome.runtime.sendMessage({action:"apolloResults",organization:e.organization,people:e.people}):chrome.runtime.sendMessage({action:"apolloError",error:"No response from background script."})})),i(a)}})),i.observe(document.body,{childList:!0,subtree:!0})})();